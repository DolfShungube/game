<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mystery Room Game</title>
    <style>
      /* ==== GLOBAL STYLES ==== */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: "Poppins", sans-serif;
      }

     body {
  background: 
    linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.8)),
    url('../src/textures/background.jpg') center/cover no-repeat fixed;
     background-size:  100%; 
  overflow: hidden;
  color: white;
}

      /* ==== MAIN MENU ==== */
      #menu-container {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        z-index: 1000;
        color: #fff;
        background: rgba(20, 20, 20, 0.85);
        padding: 40px 60px;
        border-radius: 16px;
        box-shadow: 0 0 40px rgba(0, 255, 255, 0.3);
        backdrop-filter: blur(8px);
      }

      #menu-container h1 {
        font-size: 2.8em;
        margin-bottom: 30px;
        text-shadow: 0 0 10px cyan;
      }

      .menu-btn {
        display: block;
        width: 220px;
        margin: 12px auto;
        padding: 14px 0;
        background: transparent;
        border: 2px solid cyan;
        color: cyan;
        font-size: 1.1em;
        border-radius: 10px;
        transition: all 0.25s ease;
        cursor: pointer;
      }

      .menu-btn:hover {
        background: cyan;
        color: #000;
        box-shadow: 0 0 20px cyan, 0 0 40px cyan;
        transform: scale(1.05);
      }

      /* ==== ABOUT / CREDITS SECTION ==== */
      #info-section {
        margin-top: 25px;
        text-align: center;
        font-size: 0.95em;
        color: #ccc;
      }

      #info-section button {
        background: transparent;
        border: none;
        color: #aaa;
        cursor: pointer;
        transition: color 0.2s;
      }

      #info-section button:hover {
        color: cyan;
        text-decoration: underline;
      }

      .popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(15, 15, 15, 0.9);
        padding: 30px 40px;
        border-radius: 12px;
        color: #eee;
        width: 70%;
        max-width: 600px;
        text-align: left;
        box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
        display: none;
        z-index: 2000;
        line-height: 1.5;
      }

      .popup h2 {
        margin-bottom: 10px;
        color: cyan;
      }

      .popup button {
        margin-top: 20px;
        padding: 8px 16px;
        background: cyan;
        color: #000;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.25s;
      }

      .popup button:hover {
        background: #00ffffcc;
        box-shadow: 0 0 20px cyan;
      }

      /* ==== INTERACTION PROMPT ==== */
      #interaction-prompt {
        position: absolute;
        top: 70%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 10px 20px;
        border-radius: 5px;
        font-size: 1.2em;
        display: none;
        z-index: 999;
      }
    </style>
  </head>
  <body>
    <audio id="menu-music" loop>
        <source src="./src/textures/menu_music.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <div id="app"></div>

    <!-- Game interaction message -->
    <div id="interaction-prompt">PRESS E TO INTERACT</div>

    <!-- MAIN MENU -->
    <div id="menu-container">
      <h1>Mystery Room</h1>
      <button class="menu-btn" data-level="1">Start Level 1</button>
      <button class="menu-btn" data-level="2">Start Level 2</button>
      <button class="menu-btn" data-level="3">Start Level 3</button>

      <div id="info-section">
        <button id="about-btn">About</button> â€¢ 
        <button id="credits-btn">Credits</button>
      </div>
    </div>

   
    <div id="loading-overlay" style="
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9); /* Dark semi-transparent background */
    color: white;
    display: none; /* Starts hidden */
    flex-direction: column;
    justify-content: center;
    align-items: center;
    font-family: sans-serif;
    font-size: 2em;
    z-index: 9999;
">
    <p id="loading-status">Loading the Room...</p>
    <div class="spinner"></div> </div>



    <!-- ABOUT POPUP -->
    <div id="about-popup" class="popup">
      <h2>How to play</h2>
      <h4>Controls</h4>
      <ul> 
        <li>Movement Controls:, the following keys are used for movement, <strong>W</strong>,<strong>A</strong>,<strong>Z</strong>,<strong>D</strong>.</li>
        <li>Interact: the world offer's a collection of objects the player can interect with, Use <strong>E </strong>to interect with something.</li>
        <li>Exit Interact:<strong>Space</strong> Is used to exit interact mode,giving normal controls back to the Player.</li>
        <li>Jump:<strong>Space</strong> if not interacting with something, jumping is used to get off high surfaces.</li>
        <li>Buttons: buttons can be pressed by pressing <strong>E</strong> in interact mode</li>
       
        <li>Puzzle controls:,the following keys are used to manipulate intaractable objects, <strong>W</strong>,<strong>A</strong>,<strong>Z</strong>,<strong>D</strong>.</li>
        <li>When on interect mode normal Player controls are disabled until you exit interact mode.</li>
      </ul>

      <h4>Spoilers !!</h4>
      <ul>
        <button id="l1btn">Level 1</button>
        <div id="l1" class="popup">
          <h2>Level 1 solution</h2>
          <li>Solve the riddle michine, answer Map</li>
          <li>Set the clock to the time specified in the note resulting from the riddle machine</li>
          <li>the above two steps unlock the bottom section of the drawer, open it to press the button inside</li>
          <li>The Top drawer section is opened by finding each of the 4 machanisms controlling the locks of it and turning them such that the lock opened part alines with the corner the lock in</li>
          <li>Press the Top drawer buttton</li>
          <li>Find all 4 buttons in the room to unlock all the dials</li>
          <li>The value of each dial can be found by tally marks on each wall, a dail takes the value wall it would point to if all the dials were moved from the wall and layed flat on the floor </li>
           <button onclick="closePopup('l1')">Close</button>
        </div>
        <button id="l2btn">Level 2</button>
        <div id="l2" class="popup">
          <h2>Level 2 solution</h2>
          <li>Player should use the note on the fridge to deduce the values he oven dials should take</li>
          <li>Player should notice that the symbols on the note follws a stucture similar to english writting</li>
          <li>With deduction, starting from the two symbol line and the game invironment, the results of the deduction should lend the player to the sentence, "pause! turn on oven vii ii ii i"</li>
          <li>The above tells the user to turn one dail to 75 and the other to 21</li>
          <li>Set the dials to 75 and 21 to solve</li>
           <button onclick="closePopup('l2')">Close</button>
        </div>
          <button id="l3btn">Level 3</button>
        <div id="l3" class="popup">
          <h2>Level 3 solution</h2>
          <li>Player should use the notes in the room to deduce each value on the combination lock</li>
          <li>Each note mentions a single number or 2 numbers</li>
          <li>The player should treat the number as representing x-y coordinates,single numbers like 11 represents (1,1), if 2 numbers are mentioned like 11 and 12 treat first number as x and the second as y,(11,12)</li>
          <li>Use the coordinates to read value from the scrambled letters</li>
          <li>Listing the letters in order of note number shows the final answer, "CASSIDY"</li>
          <li>Set each combination lock ring to a corresponding letter to solve the puzzle</li>
          <button onclick="closePopup('l3')">Close</button>
        </div>

      </ul>
      <button onclick="closePopup('about-popup')">Close</button>
    </div>

    <!-- CREDITS POPUP -->
    <div id="credits-popup" class="popup">
      <h2>Credits</h2>
      <h3>Developers</h3>
      <ul>

        <li>Dolf Shungube</li>
        <li>Mashego Gideon Mabeloane</li>
        <li>Joel Haggis</li>
         <li>Nelson Bhekiswayo</li>
        <li>Mivuyo Mpepo</li>

      </ul>
      <h3>Extra</h3>
      <ul>
        <li>puzzles, insipired by the Room game series and the FNaf survival logbook</li>
        <li>Bookshelf model created by Okapiguy downloaded from Sketchfab</li>
        <li>Coffee table model created by TheeMAarts downloaded from Fab</li>
      </ul>
  
      <button onclick="closePopup('credits-popup')">Close</button>
    </div>

    <script type="module" src="/src/main.js"></script>
    <script>
      // Pop-up control logic
      const aboutBtn = document.getElementById("about-btn");
      const creditsBtn = document.getElementById("credits-btn");

      const b1=document.getElementById("l1btn");
            b1.addEventListener("click", () => {
        document.getElementById("l1").style.display = "block";
      });
      
      const b2=document.getElementById("l2btn");
            b2.addEventListener("click", () => {
        document.getElementById("l2").style.display = "block";
      });
      const b3=document.getElementById("l3btn");
            b3.addEventListener("click", () => {
        document.getElementById("l3").style.display = "block";
      });
            
      aboutBtn.addEventListener("click", () => {
        document.getElementById("about-popup").style.display = "block";
      });
      creditsBtn.addEventListener("click", () => {
        document.getElementById("credits-popup").style.display = "block";
      });

      window.closePopup = (id) => {
        document.getElementById(id).style.display = "none";
      };
    </script>
  </body>
</html>
